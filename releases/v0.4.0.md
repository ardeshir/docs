## DOL v0.4.0 "HIR Complete"

**Release Date:** December 29, 2025
**Tag:** v0.4.0
**Milestone:** Phase 2a Complete - High-level Intermediate Representation

---

### Highlights

This release marks the completion of the HIR (High-level Intermediate Representation) layer, enabling the full DOL -> HIR -> MLIR -> WASM compilation pipeline.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚    .dol source â†’ HIR â†’ MLIR â†’ WASM â†’ .spirit                               â”‚
â”‚         âœ…        âœ…     âœ…      âœ…       âœ…                                 â”‚
â”‚                                                                             â”‚
â”‚    Proof: wasmtime run --invoke add add.wasm 5 7                           â”‚
â”‚    Output: 12                                                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### New Features

- **HIR Architecture**: 22 canonical node types for cleaner codegen
  - `HirModule` - Top-level compilation unit
  - `HirDecl` - Declaration nodes (gene, trait, function)
  - `HirExpr` - Expression nodes with type annotations
  - `HirStmt` - Statement nodes with control flow
  - `HirType` - Type representation nodes

- **Type System Enhancements**
  - Bidirectional type inference
  - Generic type parameters
  - Trait bounds and constraints
  - Type unification algorithm

- **MLIR Backend**
  - HIR to MLIR lowering
  - WASM dialect generation
  - Validated output with wasmtime

### Test Coverage

| Component | Tests | Status |
|-----------|-------|--------|
| Parser + Lexer | 150 | âœ… |
| HIR v0.4.0 | 466 | âœ… |
| VUDO VM | 402 | âœ… |
| Spirit Runtime | 50 | âœ… |
| MLIR + WASM | 50 | âœ… |
| **Total** | **1,118** | âœ… |

### Repository Status

| Repository | Version | Tests | Status |
|------------|---------|-------|--------|
| univrs-dol | v0.4.0 | 454 | âœ… Stable |
| univrs-vudo | v0.1.0 | 402 | âœ… Stable |
| univrs-enr | v0.1.0 | â€” | ğŸ”„ Active |
| univrs-network | â€” | â€” | ğŸ“‹ Planned |

### Breaking Changes

- None (backward compatible with v0.3.0)

### Migration

No changes required. All existing `.dol` files continue to work.

### What's Next

**Phase 4b: ENR Economic Layer**

The Entropy-Nexus-Revival layer is now in active development:

- Core types (Credits, NodeId, CreditTransfer)
- Entropy calculator (S = wn*Sn + wc*Sc + ws*Ss + wt*St)
- Nexus topology (Election, Gradient Aggregation)
- Revival pool (40% / 25% / 20% / 15% redistribution)

### Links

- [vudo.univrs.io](https://vudo.univrs.io) - VUDO OS Landing
- [learn.univrs.io/roadmap](https://learn.univrs.io/roadmap) - Development Roadmap
- [univrs.io/roadmap.html](https://univrs.io/roadmap.html) - Implementation Pathway

---

*"The network is not pipes. It is a living market."*

â€” ENR Architecture
